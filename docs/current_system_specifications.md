# AIDD.WORK - マッチングサービス 現行仕様書

## 1. システム概要

AIDD.WORKは個人ユーザー（求職者）と法人ユーザー（企業）のマッチングを行う求人サービスです。個人ユーザーは希望条件やスキルを登録し、法人ユーザーは求人情報を登録します。システムは条件に基づいて最適なマッチングを提供し、マッチングが成立した場合はメッセージ交換機能を通じてコミュニケーションが可能です。

## 2. ユーザー管理・認証

### 2.1 ユーザー登録とログイン
- ユーザーID（`user_id`）: 必須、ユニーク
- パスワード（`password`）: 必須
- ユーザー種別（`user_type`）: 「個人」または「法人」
- ログイン後はユーザー種別に応じたダッシュボードにリダイレクト

### 2.2 アクセス制御
- 未ログインユーザーはトップページのみアクセス可能
- 個人ユーザーは `individual` 名前空間下のコントローラーにアクセス
- 法人ユーザーは `company` 名前空間下のコントローラーにアクセス

## 3. プロフィール管理

### 3.1 個人プロフィール (`IndividualProfile` モデル)
- 表示名（`display_name`）
- 希望年収（`desired_salary`）: 万円単位
- 自己紹介（`bio`）
- 生年（`birth_year`）
- スキル、希望条件: 勤務地、雇用形態、勤務形態を関連モデルで管理

### 3.2 企業プロフィール (`CompanyProfile` モデル)
- 会社名（`company_name`）
- Webサイト（`website_url`）
- 会社の説明（`description`）

## 4. 求人管理

### 4.1 求人情報 (`Job` モデル)
- タイトル（`title`）
- 業務内容（`description`）
- 雇用形態（`employment_type_id`）
- 勤務形態（`work_style_id`）
- 勤務地（`location_id`）
- 年収（`salary`）: 万円単位
- 法的情報（`legal_info`）

### 4.2 求人スキル要件 (`JobSkill` モデル)
- スキルID（`skill_id`）
- レベル（`level`）: 1-5の整数値

## 5. マスターデータ

### 5.1 スキルマスター (`Skill` モデル)
- 名称（`name`）
- カテゴリ（`category`）
- 説明（`description`）

### 5.2 勤務地マスター (`Location` モデル)
- 名称（`name`）
- 説明（`description`）

### 5.3 雇用形態マスター (`EmploymentType` モデル)
- 名称（`name`）
- 説明（`description`）

### 5.4 勤務形態マスター (`WorkStyle` モデル)
- 名称（`name`）
- 説明（`description`）

## 6. マッチング機能

### 6.1 マッチングロジック
- 勤務地、雇用形態、勤務形態の基本条件が一致
- 求人の年収が個人の希望年収以上（希望年収設定時）
- 求人が要求するスキルを個人ユーザーが満たす（スキル要件設定時）

### 6.2 いいね機能 (`Like` モデル)
- 法人ユーザーが個人ユーザーにいいね: ユーザーID、対象ユーザーID、求人IDの組み合わせで記録
- 個人ユーザーが求人にいいね: ユーザーID、求人IDの組み合わせで記録
- 双方向のいいねでマッチング成立

## 7. メッセージ機能

### 7.1 会話 (`Conversation` モデル)
- ユーザーID（`user_id`）: 法人ユーザー
- 対象ユーザーID（`target_user_id`）: 個人ユーザー
- 求人ID（`job_id`）
- ステータス（`status`）: 会話の状態管理（デフォルト: "active"）

### 7.2 メッセージ (`Message` モデル)
- 会話ID（`conversation_id`）
- 送信者ID（`sender_id`）
- 内容（`content`）
- 既読フラグ（`read`）: 既読状態の管理（デフォルト: false）

### 7.3 メッセージ機能の制約
- マッチングが成立した場合のみメッセージの送受信が可能
- 各ユーザーはメッセージ一覧と個別会話画面にアクセス可能
- メッセージの既読状態を管理し、未読メッセージ数を表示

## 8. ユーザーインターフェース

### 8.1 共通レイアウト
- ナビゲーションバー: ログイン状態とユーザー種別に応じた表示切り替え
- フッター: 共通情報の表示
- レスポンシブデザイン: モバイル対応

### 8.2 個人ユーザー向け画面
- プロフィール表示・編集画面
- 求人一覧・詳細表示画面
- マッチング管理画面
- メッセージ一覧・詳細画面

### 8.3 法人ユーザー向け画面
- 企業プロフィール表示・編集画面
- 求人管理（一覧・作成・編集・削除）画面
- 個人ユーザー一覧・詳細表示画面
- マッチング管理画面
- メッセージ一覧・詳細画面

## 9. 技術仕様

### 9.1 使用技術
- Ruby on Rails 8.0
- PostgreSQL（データベース）
- Tailwind CSS（UIフレームワーク）
- Font Awesome（アイコン）
- Hotwire/Turbo（画面更新）

### 9.2 認証・セッション管理
- カスタム認証システム
- セッションベースの認証

### 9.3 デプロイ・環境
- 開発環境: Rails開発サーバー
- 本番環境: Nginx + Puma (Procfileによる設定) 