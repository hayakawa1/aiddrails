upstream puma { server unix:///home/ubuntu/rails/myapp/tmp/sockets/puma.sock; } server { listen 80; listen 443 ssl; server_name aidd.work; ssl_certificate /etc/letsencrypt/live/aidd.work/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/aidd.work/privkey.pem; root /home/ubuntu/rails/myapp/public; location / { try_files $uri @puma; } location @puma { proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host; proxy_set_header X-Forwarded-Proto $scheme; proxy_pass http://puma; } location ^~ /assets/ { gzip_static on; expires max; add_header Cache-Control public; } client_max_body_size 10M; keepalive_timeout 10; }
